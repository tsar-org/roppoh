# Directory Structure

## Overview

The `apps/roppoh` application is built with **React Router v7** and follows a feature-based architecture with nested layouts. Key characteristics:

- **Framework**: React Router v7 with SSR (Server-Side Rendering)
- **Bundler**: Vite
- **Styling**: Tailwind CSS
- **Architecture**: Feature-based with nested layout composition
- **Database**: CloudFlare D1 with better-auth

## Directory Tree with Descriptions

```text
apps/roppoh/
├── app                          # Application source code
│   ├── apis                     # React Router v7 action handlers & API routes
│   │                            # Server actions, API routes, form mutations
│   │
│   ├── components               # Reusable React components
│   │                            # Generic UI components used across pages/features
│   │
│   ├── entry.server.tsx         # React Router v7 server entry point
│   │                            # SSR handler: converts app to HTML stream
│   │
│   ├── features                 # Feature-specific implementations
│   │   └── dokploy-server-management    # Dokploy server management feature
│   │                            # Isolated feature folder containing related logic
│   │
│   ├── layouts                  # Layout wrapper components
│   │   ├── authenticated-layout # Protected routes layout (auth required)
│   │   ├── client-side-root     # Client-side root layout (hydration)
│   │   ├── guild-authorized-layout      # Guild/Discord authorized layout
│   │   └── sidebar-layout       # Main layout with sidebar navigation
│   │
│   ├── libs                     # External library integrations & adapters
│   │   ├── better-auth          # Authentication library integration
│   │   ├── discord-js           # Discord.js integration
│   │   ├── dokploy-sdk          # Dokploy SDK wrapper
│   │   ├── pino                 # Logging library setup
│   │   └── react-query          # TanStack Query (data fetching) setup
│   │
│   ├── pages                    # Page components (routes)
│   │   ├── 404                  # 404 Not Found page
│   │   ├── index                # Home/index page
│   │   ├── login                # Login/authentication page
│   │   └── unity-sports-resort  # Unity Sports Resort feature page
│   │
│   ├── root.tsx                 # React Router v7 root component
│   │                            # Outermost layout: global providers, error handling
│   │
│   ├── routes.ts                # React Router v7 route configuration
│   │                            # Defines routes with layout nesting, import routes.tsx from here
│   │
│   ├── shadcn                   # shadcn/ui pre-built components
│   │                            # Copy-paste UI component library
│   │
│   ├── tailwind.css             # Tailwind CSS global styles & directives
│   │
│   └── utils                    # Utility functions & helpers
│       ├── base-meta-function.ts        # Meta tags helper (SEO)
│       ├── dependency-injection.server.ts  # Server-side DI container
│       ├── sessions.server.ts   # Session management utilities
│       └── theme-color-to-hex-color.ts # Theme color converter utility
│
├── build                        # Production build output
│                                # Generated by build process (dist)
│
├── components.json              # shadcn/ui configuration
│                                # Defines component library settings
│
├── package.json                 # Workspace package configuration
│                                # Dependencies, scripts, metadata
│
├── public                       # Static public assets
│   ├── favicon.ico              # Browser tab icon
│   ├── icons                    # App icons for PWA/mobile
│   │   ├── tsar-192x192.png     # 192x192 icon
│   │   ├── tsar-512x512.png     # 512x512 icon
│   │   └── tsar-icon.png        # Default app icon
│   ├── offline.html             # Offline fallback page (PWA)
│   └── robots.txt               # SEO robots directive
│
├── react-router.config.ts       # React Router v7 configuration
│                                # SSR enabled, Vite environment API config
│
├── server.ts                    # React Router v7 dev/production server
│                                # Handles SSR, Vite HMR, API routing
│
├── test                         # Test files
│   ├── unit                     # Unit tests (*.test.ts, *.test.tsx)
│   │                            # Component, function, integration tests
│   │
│   └── visual-regression        # Visual regression tests (VRT)
│                                # Screenshot-based UI testing
│
├── tsconfig.json                # TypeScript configuration
│                                # Compiler options, path aliases
│
├── turbo.json                   # Turbo configuration (local override)
│                                # Task definitions for this workspace
│
├── vite.config.ts               # Vite bundler configuration
│                                # Module resolution, plugins
│
├── vitest.config.ts             # Vitest test runner configuration
│                                # Test environment, reporters
│
├── worker-configuration.d.ts    # CloudFlare Worker type definitions
│                                # Auto-generated by turbo cf-typegen
│
└── wrangler.jsonc               # CloudFlare Wrangler configuration
                                 # Worker environment, bindings, triggers
```

## Architecture Patterns

### Feature-Based Organization

Features are grouped together (e.g., `features/dokploy-server-management`):

```text
features/
└── dokploy-server-management/
    ├── components/
    ├── hooks/
    ├── types/
    └── utils/
```

This keeps related code together and makes features easy to maintain or remove.

### Server vs. Client Code

Files with `.server.ts` or `.server.tsx` extension:

- Run only on the server (Node.js runtime)
- Cannot be imported by client code
- Examples: `dependency-injection.server.ts`, `sessions.server.ts`

---

## Naming Conventions

| Type       | Naming                      | Example                         |
| ---------- | --------------------------- | ------------------------------- |
| Components | PascalCase                  | `UserProfile.tsx`, `Button.tsx` |
| Pages      | PascalCase                  | `index.tsx`, `Login.tsx`        |
| Utilities  | camelCase                   | `base-meta-function.ts`         |
| Types      | PascalCase                  | `User.ts`, `Session.ts`         |
| Tests      | `*.test.ts` or `*.test.tsx` | `Button.test.tsx`               |
| Config     | kebab-case                  | `vite.config.ts`                |

---

## File Size Considerations

- Keep components focused (single responsibility)
- Split large features into sub-folders
- Move shared utilities to `/utils`
- Use feature folders for isolated functionality
